(self.modernJsonp=self.modernJsonp||[]).push([["60861"],{731462:function(e,t,i){i.d(t,{Z:()=>a});var n=i(667294),s=i(20256),l=i(947050),o=i(785893);let a=({animationData:e})=>{let{animationContainerRef:t}=(0,l.Z)({animationData:e,loop:!0,autoplay:!0});return(0,n.useMemo)(()=>(0,o.jsx)(s.xu,{ref:t,"data-testid":"lottie-header-icon",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),[t])||null}},777939:function(e,t,i){i.d(t,{Q2:()=>a,Wy:()=>c,Y0:()=>o,_Z:()=>r,fK:()=>d});var n=i(410156),s=i(686319),l=i(670622);let o=(e,t)=>t.some(t=>e&1<<t),a=({lastUpdatedAt:e})=>{let t=(0,l.Z)(),i=new Date(e);return new Date().getTime()-i.getTime()>n.F4&&i.setHours(0,0,0,0),` ${t(i,!0)}`};function r(e,t){return(0,s.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"POST"})}function d(e,t){return(0,s.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"DELETE"})}function c(e,t){return(0,s.Z)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[e],should_hide:t}})}},739907:function(e,t,i){function n(e,t,i){let n=t;"tl-PH"===t&&(n="fil-PH");try{return e.toLocaleDateString(n,i)}catch(t){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}i.d(t,{Z:()=>n})},90691:function(e,t,i){function n(e,t){let i,n=!0;return(...s)=>{clearTimeout(i),n&&(e(...s),n=!1),i=setTimeout(()=>{e(...s),n=!0},t)}}i.d(t,{Z:()=>n})},209026:function(e,t,i){i.d(t,{Z:()=>E});var n=i(20256),s=i(20484),l=i(710815),o=i(199414),a=i(636864),r=i(216400),d=i(134308),c=i(557693),_=i(534898),u=i(697582),h=i(950382),p=i(346909),m=i(448125),g=i(103446),f=i(647049),x=i(108867),w=i(527254),b=i(675577),y=i(573827),j=i(429359),v=i(240769),I=i(350992),P=i(29086),A=i(815774),T=i(342),S=i(785893);let z={caterpillar:{darkMode:s,lightMode:l},collage:{darkMode:o,lightMode:a},drink:{darkMode:r,lightMode:d},favorite:{darkMode:c,lightMode:_},fish:{darkMode:u,lightMode:h},gumball:{darkMode:p,lightMode:m},messagebottle:{darkMode:g,lightMode:f},palette:{darkMode:x,lightMode:w},pinboard:{darkMode:b,lightMode:y},pinjar:{darkMode:j,lightMode:v},popsicle:{darkMode:I,lightMode:P},sunglasses:{darkMode:A,lightMode:T}},E=({name:e,containerSize:t,illustrationSize:i=195,message:s,description:l,primaryAction:o})=>{let{colorSchemeName:a}=(0,n.tv)();return(0,S.jsx)(n.kC,{direction:"column",height:t,width:t,children:(0,S.jsxs)(n.kC,{alignItems:"center",direction:"column",gap:3,children:[(0,S.jsxs)(n.kC,{alignItems:"center",direction:"column",gap:1,width:"100%",children:[(0,S.jsx)(n.xu,{height:i,width:i,children:(0,S.jsx)(n.Ee,{alt:"",naturalHeight:1,naturalWidth:1,role:"presentation",src:"darkMode"===a?z[e].darkMode:z[e].lightMode})}),s||l?(0,S.jsxs)(n.kC,{direction:"column",children:[(0,S.jsx)(n.X6,{accessibilityLevel:"none",align:"center",size:"400",children:s}),(0,S.jsx)(n.xv,{align:"center",size:"200",children:l})]}):null]}),o??null]})})}},947050:function(e,t,i){i.d(t,{Z:()=>s});var n=i(667294);function s(e){let{animationData:t,autoplay:s,initialSegment:l,loop:o,onComplete:a,onConfigReady:r,onDataFailed:d,onDataReady:c,onDestroy:_,onDOMLoaded:u,onEnterFrame:h,onLoadedImages:p,onLoopComplete:m,onSegmentStart:g}=e,[f,x]=(0,n.useState)(null),[w,b]=(0,n.useState)(!1),y=(0,n.useRef)(null),j=(0,n.useRef)(null),v=async()=>{x(await i.e("13000").then(i.t.bind(i,98234,23)))};return(0,n.useEffect)(()=>{v()},[]),(0,n.useEffect)(()=>{if(!j.current||!f||!t||!t.w||!t.h)return;y.current?.destroy();let i={...e,container:j.current};y.current=f.loadAnimation(i),b(!!y.current)},[j,y,t,f,e]),(0,n.useEffect)(()=>{y.current&&(y.current.loop=!!o,o&&y.current.isPaused&&y.current.play())},[o]),(0,n.useEffect)(()=>{y.current&&(y.current.autoplay=!!s)},[s]),(0,n.useEffect)(()=>{if(y.current){if(!l)return void y.current.resetSegments(!1);Array.isArray(l)&&l.length&&((y.current.currentRawFrame<l[0]||y.current.currentRawFrame>l[1])&&(y.current.currentRawFrame=l[0]),y.current.setSegment(l[0],l[1]))}},[l]),(0,n.useEffect)(()=>{if(!y.current||!w)return()=>{};let e=[{name:"complete",handler:a},{name:"loopComplete",handler:m},{name:"enterFrame",handler:h},{name:"segmentStart",handler:g},{name:"config_ready",handler:r},{name:"data_ready",handler:c},{name:"data_failed",handler:d},{name:"loaded_images",handler:p},{name:"DOMLoaded",handler:u},{name:"destroy",handler:_}].filter(e=>null!=e.handler).map(e=>(y.current?.addEventListener(e.name,e.handler),()=>{y.current?.removeEventListener(e.name,e.handler)}));return()=>{e.forEach(e=>e())}},[w,a,m,h,g,r,c,d,p,u,_]),{animationContainerRef:j,play:()=>{y.current?.play()},stop:()=>{y.current?.stop()},pause:()=>{y.current?.pause()},setSpeed:e=>{y.current?.setSpeed(e)},goToAndStop:(e,t)=>{y.current?.goToAndStop(e,t)},goToAndPlay:(e,t)=>{y.current?.goToAndPlay(e,t)},setDirection:e=>{y.current?.setDirection(e)},playSegments:(e,t)=>{y.current?.playSegments(e,t)},setSubframe:e=>{y.current?.setSubframe(e)},getDuration:e=>y.current?.getDuration(e),destroy:()=>{y.current?.destroy()},animationLoaded:w,animationItem:y.current}}},966279:function(e,t,i){i.d(t,{Jo:()=>c,mv:()=>u,nJ:()=>_});var n=i(667294),s=i(729434);let l={hiddenNews:{}};function o(e,t){if(e=e||l,"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS"!==t.type)return e;{let{payload:{id:i,isHidden:n}}=t;return{hiddenNews:{...e?.hiddenNews,[i]:n}}}}var a=i(785893);let{Provider:r,get:d}=(0,s.Z)("HiddenNews");function c({children:e}){let[t,i]=(0,n.useReducer)(o,l),s=(0,n.useMemo)(()=>({dispatch:i,hiddenNews:t}),[i,t]);return(0,a.jsx)(r,{value:s,children:e})}function _(){let{dispatch:e,hiddenNews:{hiddenNews:t}}=d();return(0,n.useMemo)(()=>({updateNewsIdToHiddenNews:(t,i)=>{e({type:"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS",payload:{id:t,isHidden:i}})},getShownNewsCount:e=>e.filter(e=>e&&e.id&&!(e.id in t&&t[e.id])).length}),[e,t])}function u(){let{hiddenNews:e}=d();return e}},315702:function(e,t,i){i.d(t,{Z:()=>a});var n=i(667294),s=i(616550),l=i(20256),o=i(785893);let a=(0,n.memo)(({tabs:e,activeIndex:t})=>{let i=(0,s.k6)();return(0,o.jsx)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:2,width:"100%",children:(0,o.jsx)(l.mQ,{activeTabIndex:t,onChange:({event:t,activeTabIndex:n,dangerouslyDisableOnNavigation:s})=>{t.preventDefault(),s(),i.push((e[n]||e[0]).href)},tabs:e})})})},536488:function(e,t,i){i.d(t,{AI:()=>L,AM:()=>b,AY:()=>Q,Ay:()=>a,C:()=>K,Cc:()=>c,DX:()=>E,GO:()=>H,HJ:()=>r,I2:()=>O,IO:()=>es,IV:()=>s,J0:()=>g,LL:()=>V,Ng:()=>n,P:()=>I,P3:()=>m,QE:()=>ei,QX:()=>ee,Rd:()=>v,So:()=>x,V$:()=>u,Vp:()=>G,WC:()=>T,ZH:()=>k,aE:()=>p,c4:()=>P,cU:()=>A,ci:()=>S,di:()=>Z,gb:()=>q,gs:()=>R,hD:()=>W,hf:()=>U,hp:()=>C,hy:()=>o,ie:()=>f,kJ:()=>$,kc:()=>j,mD:()=>B,mM:()=>z,o9:()=>l,pv:()=>_,qZ:()=>y,qb:()=>w,uW:()=>M,uZ:()=>d,uy:()=>X,vG:()=>Y,wA:()=>h,wl:()=>F,yS:()=>et,yc:()=>D,yf:()=>el,ys:()=>J,zM:()=>N});let n={BOARD:"board",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},s=3,l="news-feed-sidebar",o=360,a=15,r=375,d=64,c=36,_=44,u=344,h=164,p=328,m=164,g=108.7,f=3,x=82,w=82,b=164,y=164,j=4,v=164,I=164,P=2,A=82,T=164,S=2,z=2,E=4,N=328,D="290x",k="170x",M={backgroundColor:"rgba(0, 0, 0, 0.4)"},R=4,H="1px",C=48,L=32,U=36,Z="136x136",O=2,F=24,W=20,B=72,G=48,X=54,Y=54,J=4,$=118,Q=236,q={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,MINI_PIN_GRID:4,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15,MINI_BOARD_GRID_WITH_ICON:18,HIGHLIGHT_NOTIFICATION:23},V="recommendation",K="dropdown_item_settings_id",ee=10,et=20,ei=5e3,en="#E9E4FF",es={backgroundColor:en,borderColor:en,paddingLeft:"16px",paddingTop:"16px",paddingBottom:"16px",paddingRight:"12px"},el={...es,paddingRight:"10px"}},469817:function(e,t,i){i.d(t,{Es:()=>d,HW:()=>r,er:()=>_,rQ:()=>c});var n=i(111330),s=i(753143),l=i(603316);let o=e=>e>=Date.now()-72e5,a=(e,t)=>{let i=[];if(e)for(let n of e)(!t||n.is_shared)&&o(n.ts)&&i.push(n);return i},r=()=>{let e=(0,s.M0)().getItem(n.uc)??[],t=a(e,!1),i=a(e,!0),l=t.map(e=>e.first_pin_image_signature),r=i.map(e=>e.first_pin_image_signature),d=(e=>{let t={};if(e)for(let i of e)i.is_shared&&o(i.ts)&&i.pin_id&&(t[i.pin_id]={inviteCode:i.pin_invite_code});return t})(e);return{extraPlpImages:l,plpImageRenderData:t,extraBlpImages:a((0,s.M0)().getItem(n.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:r,sharedPinData:d}},d=(e,t)=>{if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i].id!==t[i].id)return!1;return!0},c=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),_=(e,t,i,n)=>{let s={};return e.forEach(e=>{let o=e.id,a=e.pins.length??0;s[o]=a,(0,l.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",a,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:i,age:n,use_case_display_name:e.display_name}}),(0,l.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",a,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:i,age:n,use_case_display_name:e.display_name}})}),s}},309048:function(e,t,i){i.d(t,{Z:()=>u});var n=i(667294),s=i(20256),l=i(731462),o=i(667835),a=i(744862),r=i(525839),d=i(536488),c=i(793698),_=i(785893);let u=({clickable:e=!1,headerIconImageUrl:t,headerIconObjectsSchema:i,headerSmallOverlayIconUrl:u,headerSmallOverlayIconUrlDark:h})=>{let p=(0,r.ZP)(),[m,g]=[d.hp,d.hp],f=(0,c.mN)()(i?.[0]?.id??""),[x,w]=(0,n.useState)(null),b=t&&".json"===t.slice(-5).toLowerCase(),y=async e=>{try{let t=await fetch(e);return await t.json()}catch(e){return null}};(0,n.useEffect)(()=>{(async()=>{b&&!x&&w(await y(t))})()},[b,x,t]);let j=(0,n.useMemo)(()=>x?(0,_.jsx)(l.Z,{animationData:x}):(0,_.jsx)(s.xH,{accessibilityLabel:"Loading",show:!0,size:"sm"}),[x]);if(t)return(0,_.jsx)(s.zd,{height:m,rounding:b?2:"circle",width:g,children:b?(0,_.jsx)(s.xu,{"data-test-id":"lottie-icon",children:j}):(0,_.jsx)(s.xu,{"data-test-id":"header-icon-image",children:(0,_.jsx)(s.Ee,{alt:p._('Pinterest recommendation', 'label for mweb notification with recommended content', 'label for mweb notification with recommended content'),color:"#ffffff",fit:"cover",naturalHeight:m,naturalWidth:g,src:t})})});if(0===i.length||void 0===i[0])return null;let v=null,I=null,P=i[0].type;if(P===d.Ng.PIN){m=64,g=d.hp;let e=i[0];v=(0,_.jsx)(s.zd,{height:m,rounding:d.I2,wash:!0,width:g,children:(0,_.jsx)(s.Ee,{alt:e.description??"",fit:"cover",naturalHeight:m,naturalWidth:g,src:e.images["290x"].url})}),I=`/pin/${e.id}/`}else if(P===d.Ng.BOARD){let e=i[0];v=(0,_.jsx)(s.zd,{height:m,rounding:d.I2,wash:!0,width:g,children:(0,_.jsx)(s.Ee,{alt:e.name??"",fit:"cover",naturalHeight:m,naturalWidth:g,src:e.image_cover_url})}),I=e.url?e.url:null}else if(P===d.Ng.USER)if(i.length>1&&i[1]?.type===d.Ng.USER){m=d.AI,g=d.AI;let e=i[0],t=i[1];v=(0,_.jsxs)(s.xu,{height:m,position:"relative",width:g,children:[(0,_.jsx)(s.xu,{display:"flex",height:m,left:!0,position:"absolute",top:!0,width:g,children:(0,_.jsx)(a.qE,{name:e.full_name??"",outline:!0,src:e.image_large_url??void 0})}),(0,_.jsx)(s.xu,{bottom:!0,display:"flex",height:m,position:"absolute",right:!0,width:g,children:(0,_.jsx)(a.qE,{name:t.full_name??"",outline:!0,src:t.image_large_url??void 0})})]})}else{let e=i[0],t=f?.avatar_color_index;v=(0,_.jsx)(s.kC,{alignItems:"stretch",justifyContent:"between",width:g,children:(0,_.jsx)(a.qE,{color:t,name:e.full_name??"",src:e.image_large_url??void 0})}),I=`/${encodeURIComponent(e.username)}/`||null}else if(P===d.Ng.INTEREST){let e=i[0];v=(0,_.jsx)(s.zd,{height:m,rounding:2,width:g,children:(0,_.jsx)(s.Ee,{alt:e.name,color:"#ffffff",naturalHeight:m,naturalWidth:g,src:e.images["236x"].url})})}else if(P===d.Ng.SEARCH){let{images:e,term:t}=i[0]||{};v=(0,_.jsx)(s.zd,{height:m,rounding:d.I2,wash:!0,width:g,children:e[0]&&(0,_.jsx)(s.Ee,{alt:t??"",fit:"cover",naturalHeight:m,naturalWidth:g,src:e[0]})})}if(e&&I)return(0,_.jsx)(s.Tg,{href:I,rounding:P===d.Ng.USER?"circle":d.I2,tapStyle:"none",children:(0,_.jsx)(s.xu,{"data-test-id":"notification-item-icon-clickable",height:m,width:g,children:v})});let A=(0,o.Yc)()?h:u,T=A?(0,_.jsx)(s.xu,{bottom:!0,"data-test-id":"notification-item-icon-overlay",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,children:(0,_.jsx)(s.zd,{height:d.hD,rounding:d.I2,wash:!0,width:d.hD,children:(0,_.jsx)(s.Ee,{alt:"",fit:"cover",naturalHeight:d.hD,naturalWidth:d.hD,src:A})})}):null;return v&&(0,_.jsxs)(s.xu,{"data-test-id":"notification-item-icon",height:m,position:"relative",width:g,children:[v,T]})}},68700:function(e,t,i){i.d(t,{Z:()=>o});var n=i(20256),s=i(302148),l=i(785893);let o=({align:e="start",bold:t=!1,headerText:i,ignoreAPIMarkup:o=!1,inline:a=!1,isLink:r=!1,textMapping:d={},textSize:c="300"})=>{let _={};return Object.keys(d).forEach(e=>{let t=d[e];if(o||t&&!t.b&&"r"in t&&!t.r&&"l"in t&&!t.l)_[e]=t?.t;else{let i=r&&t&&"l"in t&&t.l?(0,l.jsx)(n.rU,{display:"inlineBlock",href:t.l,rounding:"pill",tapStyle:"none",underline:"hover",children:t.t},e):t?.t;_[e]=(0,l.jsx)(n.xv,{color:t&&"r"in t&&t.r?"error":"default",inline:!0,size:c,weight:t?.b?"bold":"normal",children:i},e)}}),(0,l.jsx)(n.xv,{align:e,inline:a,size:c,weight:t?"bold":"normal",children:(0,s.bF)(i,_)})}},784038:function(e,t,i){i.d(t,{Z:()=>$});var n=i(616550),s=i(15667),l=i(647709),o=i(446372),a=i(667294),r=i(20256),d=i(575108),c=i(980787),_=i(410156),u=i(739907),h=i(90691),p=i(686319),m=i(209026),g=i(982166),f=i(821342),x=i(670622),w=i(525839),b=i(516114),y=i(914061),j=i(886981),v=i(123998),I=i(378888),P=i(669442),A=i(341742),T=i(551651),S=i(469167),z=i(777939),E=i(536488),N=i(841982),D=i(547585),k=i(309048),M=i(68700),R=i(785893);let H=({notification:e,handleTouchNotification:t,showIcon:i})=>{let{header_icon_image_url:n,header_icon_objects:s,header_small_overlay_icon_image_url:l,header_small_overlay_icon_image_url_dark:o,header_text:a,title_text:d,text_mapping:c}=e,_=n||s&&s.length>0;return(0,R.jsxs)(r.xu,{"data-test-id":"notification-item-title",display:"flex",children:[i&&_&&(0,R.jsx)(r.xu,{"data-test-id":"notification-header-icon",margin:"auto",paddingX:0,width:void 0,children:(0,R.jsx)(r.iP,{onTap:t,children:(0,R.jsx)(k.Z,{headerIconImageUrl:n,headerIconObjectsSchema:s,headerSmallOverlayIconUrl:l,headerSmallOverlayIconUrlDark:o})})}),(0,R.jsx)(r.kC,{alignItems:"center",flex:"grow",children:(0,R.jsx)(r.iP,{onTap:t,children:(0,R.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},marginEnd:2,paddingX:i&&_?2:0,children:[d&&(0,R.jsx)(M.Z,{bold:!0,headerText:d,textMapping:c||{},textSize:"300"}),(0,R.jsx)(M.Z,{headerText:a,inline:!0,textMapping:c||{},textSize:"300"})]})})})]})};function C({handleMenuEllipsisTap:e=()=>{},handleTouchNotification:t=()=>{},notification:i}){let{last_updated_at:n}=i,s=i.unread&&(0,z.Y0)(i.encoded_display_mode,[E.gb.HIGHLIGHT_NOTIFICATION]),l=s?E.IO:{},o=2*!!s;return"news"!==i.type?null:(0,R.jsx)(N.Z,{children:(0,R.jsx)(D.uc,{auxData:{notification_id:i.id,news_type:i.news_type},newsType:i.news_type,notificationId:i.id,children:({impressionTrackerRef:s})=>(0,R.jsx)(r.xu,{ref:s,"data-test-id":"notification-item",direction:"column",display:"flex",justifyContent:"center",marginEnd:"auto",marginStart:"auto",maxWidth:488,paddingY:0,children:(0,R.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{borderColor:"#E9E9E9",...l}},"data-test-id":"notification-item-inner",marginEnd:o,marginStart:o,paddingX:4,rounding:6,children:(0,R.jsx)(r.xu,{height:"80px",width:"100%",children:(0,R.jsxs)(r.kC,{alignItems:"stretch",height:"100%",justifyContent:"center",children:[(0,R.jsx)(r.kC,{flex:"grow",children:(0,R.jsx)(H,{handleMenuEllipsisTap:e,handleTouchNotification:()=>t(i),notification:i,showIcon:!0})}),(0,R.jsxs)(r.kC,{alignItems:"end",direction:"column",children:[(0,R.jsx)(r.kC,{justifyContent:"end",children:(0,R.jsx)(r.xv,{align:"end",color:"subtle",inline:!0,size:"200",children:(0,R.jsx)(z.Q2,{lastUpdatedAt:n})})}),(0,R.jsx)(r.xu,{marginTop:2,children:(0,R.jsx)(r.hU,{accessibilityLabel:"notification options",bgColor:"white",icon:"ellipsis",iconColor:"darkGray",onClick:()=>e(i),size:"xs"})})]})]})})})})},i.id)})}let L=e=>{let{fetchMoreNotifications:t,handleMenuEllipsisTap:i,handleTouchNotification:n,i18n:s,notifications:l}=e,[o,d]=(0,a.useState)([]),[c,_]=(0,a.useState)([]),[u,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!(l.length>0))return;let e=l.find(e=>e.unread&&(0,z.Y0)(e.encoded_display_mode,[E.gb.HIGHLIGHT_NOTIFICATION]))||null;h(e),d(l.filter(t=>t.unread&&t.id!==e?.id)),_(l.filter(e=>!e.unread))},[l]);let p=e=>(0,R.jsx)(r.xu,{"data-test-id":"newshub-news-list-grid",children:(0,R.jsx)(S.default,{cacheKey:"notifications",columnWidth:1e3,items:e,loadItems:t,minCols:1,renderItem:({data:e})=>(0,R.jsx)(C,{handleMenuEllipsisTap:i,handleTouchNotification:n,notification:e})})});return(0,R.jsxs)(r.xu,{"data-test-id":"newshub-news-list",children:[(u||o.length>0)&&(0,R.jsxs)(r.xu,{marginBottom:4,children:[(0,R.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,R.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:s._('New', 'Title for news hub section containing unread news items', 'Unread news hub items')})}),(0,R.jsx)(r.xu,{"data-test-id":"newshub-news-list-highlighted",children:u&&p([u])}),p(o)]}),c.length>0&&(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,R.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:s._('Seen', 'Title for news hub section containing read news items', 'Read news hub items')})}),p(c)]})]})};var U=i(966279),Z=i(315702),O=i(475498),F=i(473728),W=i(87853);let B={UNFOLLOWED_USER:"unfollowedUser",UNFOLLOWED_PIN:"unfollowedPin",FOLLOWED_USER:"followedUser",FOLLOWED_PIN:"followedPin",ACTION_FAILED:"actionFailed"},G=({handleCloseMenuSelection:e,handleObjectSubscriptionById:t,handleSettingsRedirect:i,newsId:n,subscribableObjects:s})=>{let l=(0,w.ZP)(),{logContextEvent:o}=(0,c.u)(),{showToast:d}=(0,W.dI)(),{updateNewsIdToHiddenNews:_}=(0,U.nJ)(),u=s?s[0]:null,[h,m]=(0,a.useState)(u?.subscribed_to_notifications||!1);(0,a.useEffect)(()=>{u?.type==="interest"?m(!1):u?.subscribed_to_notifications!==void 0&&m(u.subscribed_to_notifications)},[u?.type,u?.subscribed_to_notifications]);let g=u?.id??0,f=u?.type??"",x=u?.full_name??"",b={unfollowedUser:(0,F.Z)(l._('You will no longer receive notifications about {{user_name}}.', 'unfollwedUser.toast', 'Unfollowed a user'),{user_name:x}),unfollowedPin:l._('You will no longer receive notifications about this Pin.', 'unfollwedPin.toast', 'Unfollowed a pim'),followedUser:(0,F.Z)(l._('You will now receive notifications about {{user_name}}.', 'followedUser.toast', 'Followed a user'),{user_name:x}),followedPin:l._('You will now receive notifications about this Pin.', 'follwedPin.toast', 'Followed a pim'),actionFailed:l._('Action could not be performed', 'notPerformed.toast', 'action could not be performed')},y={unfollowedUser:(0,F.Z)(l._('Turn off updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn off updates from a user, user_name: user_name of the followed user'),{user_name:x}),unfollowedPin:l._('Turn off updates from this Pin', 'NewsListItem.UnfollowPin.Flyout', 'Unfollow a pin'),followedUser:(0,F.Z)(l._('Turn on updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn on updates from a user, user_name: user_name of the followed user'),{user_name:x}),followedPin:l._('Turn on updates from this Pin', 'NewsListItem.FollowPin.Flyout', 'Follow a pin'),actionFailed:""},j=e=>{let t=l._('Action could not be performed', 'notPerformed.toast', 'action could not be performed');Object.values(B).includes(e)&&(t=b[e]),d(({hideToast:e})=>(0,R.jsx)(O.Z,{onHide:e,text:t}))},v=async e=>{try{await (0,z.fK)(n,e)}catch(e){j(e)}},I=async e=>{try{let{error:t}=(await (0,z._Z)(n,e)).resource_response;t||d(({hideToast:t})=>(0,R.jsx)(O.Z,{duration:E.QE,onHide:t,primaryAction:{accessibilityLabel:l._('Undo see less', 'NewsListItem.UndoSeeLess.Toast.a11yButton', 'undoes the see less action'),label:l._('Undo', 'NewsListItem.UndoSeeLess.Toast.Button', 'undoes the see less action'),onClick:()=>{o({event_type:101,element:14309,component:3,view_type:107,view_parameter:3081}),v(e),t()}},text:l._('Got it! We\'ll show you less about this interest.', 'NewsListItem.UndoSeeLess.Toast.Text', 'text for see less undo toast')}))}catch(e){j(e)}},P=(e,t)=>{let{UNFOLLOWED_USER:i,UNFOLLOWED_PIN:n,FOLLOWED_USER:s,FOLLOWED_PIN:l,ACTION_FAILED:o}=B,[a,r]=["user","pin"];return e&&t===a?i:e||t!==a?e&&t===r?n:e||t!==r?o:l:s},A=async()=>{try{let{error:e,data:i}=(await (0,p.Z)({url:"/v3/settings/notifications/objects/",method:"POST",data:{object_ids_to_unsubscribe:h?g:null,object_ids_to_resubscribe:h?null:g}})).resource_response;e||t(g,i[g]);let n=P(h,f);j(n)}catch(e){j(e)}};async function T(e){try{let{error:t}=(await (0,z.Wy)(n,e)).resource_response;!t&&(_(n,e),e&&(()=>{let e=l._('Update removed!', 'NewsListItem.UndoRemove.Toast.Text', 'text for restore hidden toast');d(({hideToast:t})=>(0,R.jsx)(O.Z,{duration:E.QE,onHide:t,primaryAction:{accessibilityLabel:l._('Undo removal', 'NewsListItem.UndoRemove.Toast.a11yButton', 'restores the removed news'),label:l._('Undo', 'NewsListItem.UndoRemove.Toast.Button', 'restores the removed news'),onClick:()=>{T(!1),t()}},text:e}))})())}catch(e){j(e)}}let S=()=>{A(),e()},N=(0,R.jsx)(a.Fragment,{children:s?.slice(0,2).filter(e=>e.type===E.Ng.INTEREST).map(t=>(0,R.jsx)(r.iP,{dataTestId:"see-less-interest",fullWidth:!1,onTap:()=>{var i;return i=t.id.toString(),void(o({event_type:101,element:14308,component:3,view_type:107,view_parameter:3081}),I(i),e())},children:(0,R.jsx)(r.xu,{display:"flex",marginTop:3,children:(0,R.jsx)(r.X6,{size:"400",children:(l._('See less about {{ interest_name }}', 'NewsListItem.SeeLessAboutInterest.Flyout', 'See less of an interest. interest_name: the interest name to see less of')).replace("{{ interest_name }}",t.name)})})},t.id))});return(0,R.jsx)(r.xu,{paddingX:2,paddingY:3,children:(0,R.jsxs)(r.kC,{direction:"column",gap:{row:0,column:2},children:[(()=>{let t=h?P(h,f):null,n=!!t&&Object.values(B).includes(t),s="";return n&&t&&(s=y[t]),(0,R.jsxs)(a.Fragment,{children:[N,n&&(0,R.jsx)(r.iP,{fullWidth:!1,onTap:S,children:(0,R.jsx)(r.xu,{display:"flex",marginTop:3,children:(0,R.jsx)(r.X6,{size:"400",children:s})})}),(0,R.jsx)(r.iP,{fullWidth:!1,onTap:()=>{T(!0),e()},children:(0,R.jsx)(r.xu,{display:"flex",marginTop:3,children:(0,R.jsx)(r.X6,{size:"400",children:l._('Delete update', 'NewsListItem.RemoveNews.Item', 'Delete update')})})}),(0,R.jsx)(r.iP,{fullWidth:!1,onTap:i,children:(0,R.jsx)(r.xu,{display:"flex",marginTop:3,children:(0,R.jsx)(r.X6,{size:"400",children:l._('View notification settings', 'Ellipsis.Menu.viewNotificationSettings', 'Button to go to notification settings')})})})]})})(),(0,R.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:3,children:(0,R.jsx)(r.zx,{color:"gray",onClick:e,size:"lg",text:l._('Close', 'Ellipsis.Menu.closeModal', 'Accessibility label for close button on Modal on Ellipsis Menu')})})]})})},X={boxShadow:"0 6px 8px -4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"},Y=e=>{let{i18n:t,newsHubResource:i,location:s}=e,{logContextEvent:l}=(0,c.u)(),{hiddenNews:o}=(0,U.mv)(),[x,w]=(0,a.useState)(0),[j,S]=(0,a.useState)(!1),[z,E]=(0,a.useState)(!1),[N,D]=(0,a.useState)({id:null,newsType:null}),[k,M]=(0,a.useState)([]),[H,C]=(0,a.useState)({}),O=(0,f.Z)(),F=(0,h.Z)(()=>S(window.scrollY>0),100);(0,A.Z)(()=>(window.addEventListener("scroll",F),d.Z.create("NewsHubBadgeResource",{}).callDelete({showError:!1}),d.Z.create("NewsHubBadgeResource",{}).callGet().then(({resource_response:{data:e}})=>{e.conversations_unseen_count>0&&w(e.conversations_unseen_count)}),()=>{window.removeEventListener("scroll",F)})),(0,a.useEffect)(()=>{let e=(i.data||[]).filter(e=>"news"===e.type&&!o[e.id]);M(e);let t=e.reduce((e,t)=>(t.subscribable_objects?.forEach(i=>{e[t.id]=[...e[t.id]||[],i]}),e),{})||{};Object.keys(t).length>0&&C(t)},[i.data,o]);let W=new Date,B={},Y=(e,t)=>{(0,p.Z)({url:"/v3/news_hub/click/",method:"POST",data:{news_id_str:e,link:t}})},J=k&&k.length>0,$=(0,I.mB)(s.search),{locale:Q}=e;W.setHours(0,0,0,0),null!=k&&k.forEach(i=>{if(!i)return;let{id:n,last_updated_at:s}=i,l=new Date(s);l.setHours(0,0,0,0);let o="";if(l.getTime()===W.getTime())o=t._('Today', ' - ', ' -- ');else if(l.getTime()===new Date(W.getTime()-_.F4).getTime())o=t._('Yesterday', ' - ', ' -- ');else if(l>=new Date(W.getTime()-6*_.F4)){let t=e.getHumanizedTimeSince(l);o="string"!=typeof t?t.join(""):t}else o=(0,u.Z)(l,Q,{month:"long",day:"numeric"});o in B||(B[o]=n)});let q={href:"/notifications/",text:t._('Updates', 'mweb.inbox.tab.updates.heading', 'Heading for updates tab')},V=x>0?{href:"/inbox/",text:t._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab'),indicator:"dot"}:{href:"/inbox/",text:t._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab')},K=O.isAuth&&O.should_show_messaging?[q,V]:[q];return"inbox"===$.tab?(0,R.jsx)(n.l_,{to:{pathname:"/inbox/"}}):(0,R.jsx)(T.Z,{viewParameter:3081,viewType:107,children:(0,R.jsx)(v.Z,{view:107,viewParameter:3081,children:(0,R.jsxs)(y.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,R.jsx)(r.Le,{top:0,children:(0,R.jsxs)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:j?X:{}},width:"100%",children:[(0,R.jsx)(Z.Z,{activeIndex:0,tabs:K}),(0,R.jsx)(r.xu,{color:"default",height:8})]})}),(0,R.jsxs)(r.xu,{"data-test-id":"notifications-container",children:[J&&(0,R.jsx)(L,{fetchMoreNotifications:i.fetchMore,handleMenuEllipsisTap:e=>{let{id:t,news_type:i}=e;l({event_type:101,element:12208,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:i}}),E(!0),D({id:t,newsType:i})},handleTouchNotification:({id:t,display_mode:i,news_type:n,override_click_url:s})=>{l({view_type:107,view_parameter:3081,element:1194,event_type:102,object_id_str:t,aux_data:{display_mode:i,news_type:n}});let o=s;if(o&&(o=(0,P.Z)(o,{entrySource:"news_hub"})),(0,I.sD)(o))Y(t,o),window.location=o;else{let i=o?encodeURI(o):`/news_hub/${encodeURIComponent(t)}`;Y(t,i),e.history.push(i)}},i18n:t,notifications:k}),!i.isFetching&&!J&&(0,R.jsx)(r.kC,{alignItems:"center",height:`calc(100vh - (${b.R$}px + 80px)`,justifyContent:"center",width:"100%",children:(0,R.jsx)(m.Z,{containerSize:320,description:t._('Use updates to see activity on your Pins and boards and get tips on topics to explore. They\u2019ll be here soon.', 'notifications.sunglasses.illustrations.description', 'Message displayed under the illustration when no notifications'),illustrationSize:186,message:t._('Updates are on their way', 'notifications.sunglasses.illustrations.message', 'Description displayed under the illustration when no notifications'),name:"sunglasses",primaryAction:(0,R.jsx)(r.ZP,{href:"/",text:t._('Browse home feed', 'notificatons.sunglasses.illustration', 'Button text for refreshing the page when no notifications')})})}),i.isFetching&&(0,R.jsx)(r.xu,{column:12,paddingY:2,children:(0,R.jsx)(r.xH,{accessibilityLabel:t._('Loading feed', ' - ', ' -- '),show:!0})}),(0,R.jsx)(g.ZP,{accessibilityModalLabel:"",isOpen:z,mobileHideCloseIcon:!0,onDismiss:()=>E(!1),children:(0,R.jsx)(r.xu,{padding:3,children:null!==N.id&&(0,R.jsx)(G,{handleCloseMenuSelection:()=>{D({id:null,newsType:null}),E(!1)},handleObjectSubscriptionById:(e,t)=>{let{id:i,newsType:n}=N;l({event_type:101,element:12209,component:3,view_type:107,view_parameter:3081,object_id_str:JSON.stringify(e),aux_data:{news_type:n,is_unsub_action:!t}});let s=JSON.parse(JSON.stringify(H));s[i].find(t=>t.id===e).subscribed_to_notifications=t,C(s)},handleSettingsRedirect:()=>{l({event_type:101,element:12210,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:N.newsType}}),e.history.push("/settings/notifications")},newsId:N.id,subscribableObjects:H[N.id]})})})]})]})})})},J=()=>{let e=(0,n.k6)(),t=(0,n.TH)(),i=(0,w.ZP)(),l=(0,x.Z)(),o=(0,j.Z)({name:"NewsHubResource"}),{locale:a}=(0,s.B)();return(0,R.jsx)(U.Jo,{children:(0,R.jsx)(Y,{getHumanizedTimeSince:l,history:e,i18n:i,locale:a,location:t,newsHubResource:o})})},$=function(){let e=(0,l.ZP)(),{isAuthenticated:t}=(0,s.B)();return t?"desktop"===e?(0,R.jsx)(o.Z,{}):(0,R.jsx)(J,{}):(0,R.jsx)(n.l_,{to:"/"})}},252037:function(e,t,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/notifications",function(){return i(784038).Z}])},20484:function(e){e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_dark-a2684283.svg"},710815:function(e){e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_light-4351e2b0.svg"},199414:function(e){e.exports="https://s.pinimg.com/webapp/ill_collage_spot_dark-801b6d1e.svg"},636864:function(e){e.exports="https://s.pinimg.com/webapp/ill_collage_spot_light-172b7814.svg"},216400:function(e){e.exports="https://s.pinimg.com/webapp/ill_drink_spot_dark-e13d8191.svg"},134308:function(e){e.exports="https://s.pinimg.com/webapp/ill_drink_spot_light-eba7901c.svg"},557693:function(e){e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_dark-86e6efb1.svg"},534898:function(e){e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_light-c494804e.svg"},697582:function(e){e.exports="https://s.pinimg.com/webapp/ill_fish_spot_dark-eabdd91c.svg"},950382:function(e){e.exports="https://s.pinimg.com/webapp/ill_fish_spot_light-68e932f6.svg"},346909:function(e){e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_dark-fe6ad7b3.svg"},448125:function(e){e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_light-31a9c021.svg"},103446:function(e){e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_dark-6e62eced.svg"},647049:function(e){e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_light-6d12e6a6.svg"},108867:function(e){e.exports="https://s.pinimg.com/webapp/ill_palette_spot_dark-7184dea0.svg"},527254:function(e){e.exports="https://s.pinimg.com/webapp/ill_palette_spot_light-3ec2a5f3.svg"},675577:function(e){e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_dark-9a1edd2c.svg"},573827:function(e){e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_light-eac9767f.svg"},429359:function(e){e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_dark-920f4221.svg"},240769:function(e){e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_light-a4bdf6a8.svg"},350992:function(e){e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_dark-9739cf41.svg"},29086:function(e){e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_light-03d29257.svg"},815774:function(e){e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_dark-e0aee9e0.svg"},342:function(e){e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_light-42e9d57e.svg"}},function(e){e.O(0,["10812","16194","16369","17830","25418","33171","39810","47707","60471","66725","66986","80976","82721","8709","88038","90275","90542","9296","96296","99324"],function(){return e(e.s=252037)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/notifications-8ffb57961bcccaea.mjs.map